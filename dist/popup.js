(()=>{"use strict";var e,t,o,n,l={975:(e,t,o)=>{o.a(e,(async(e,t)=>{try{let o=[],n="",l=document.querySelector("table"),a=["date","priority"];async function r(){o=[]}async function s(){console.log("set default"),r(),o.push(["date"]),o.push(["Click here!","Some Assignements","0001-01-01","1","0"]),await chrome.storage.sync.set({data:o}),await chrome.storage.sync.set({theme:"chocalate"})}async function c(){await r(),console.log("running fetchData"),chrome.storage.sync.get(["data"]).catch((e=>{console.log("the reason we couldnt find data is "+e.type),r()})),await chrome.storage.sync.get("data").then((async e=>{null==e.data&&await s(),""==e.data&&await d();for(let t=0;t<e.data.length;t++){let n=[];if(console.log("we are in for loop and result[data][i].length is "+typeof e.data[t].length),0!=e.data[t].length){for(let o=0;o<e.data[t].length;o++)console.log("i: "+t+" j: "+o),console.log("result[data][i][j] is "+e.data[t][o]),n.push(e.data[t][o]);o.push(n)}}})),console.log("local data after setLocal"),f(o),await chrome.storage.sync.get("theme").then((async e=>{n=e.theme,console.log("localTheme is "+n),g(n)}))}async function i(e){console.log("we are removing index "+e+" localData.length "+o.length),f(o),console.log("lets quickly remove sort");let t=o.shift();if(f(o),e==o.length)return console.log("last index"),o.pop(),console.log("removing data"),f(o),o.unshift(t),void await chrome.storage.sync.set({data:o});let n=o.length;for(let t=e;t<n;t++)o[t-1]=o[t];o.pop(),console.log("removing data"),f(o),console.log("unshift"),o.unshift(t),f(o),await chrome.storage.sync.set({data:o})}async function d(){console.log("setting local data from HTML"),r();let e=document.querySelector("table");const t=e.rows.length;for(let l=1;l<t;l++){let t=e.rows.item(l).cells,a=t.length,r=[];for(var n=0;n<a-1;n++){let e=t.item(n),o=e.getElementsByTagName("input"),l=e.getElementsByTagName("select");if(null!=o[0]){const e=o[0];r.push(e.value)}if(null!=l[0]){const e=l[0];r.push(e.value)}}console.log("row data is "+r),o.push(r)}let l=document.querySelector("#sort"),a=l.options[l.selectedIndex].value;o.unshift([a]);let s=await u();await chrome.storage.sync.set({data:o}),s&&await y()}async function u(){let e=JSON.parse(JSON.stringify(o)),t=document.querySelector("#sort"),n=t.options[t.selectedIndex].value;switch(console.log("sort value is "+n),f(o),o.shift(),console.log("local data after shift"),f(o),n){case"date":o.sort((function(e,t){return""==e[2]&&""==t[2]?(console.log("Local data has been sorted to: "+o),0):""==e[2]?(console.log("Local data has been sorted to: "+o),-1*new Date(t[2]).getTime()):""==t[2]?(console.log("Local data has been sorted to: "+o),new Date(e[2]).getTime()):(console.log("Local data has been sorted to: "+o),new Date(e[2]).getTime()-new Date(t[2]).getTime())}));break;case"priority":o.sort((function(e,t){return t[3]==e[3]?0:Number(t[3])>Number(e[3])?1:-1}))}return o.unshift([n]),console.log("sorted localData"),JSON.stringify(o)!==JSON.stringify(e)}async function y(){var e,t;if(console.log("creating HTML from Data"),1==o.length){console.log("local data is empty so lets make something else");let e=document.createElement("h1");return e.textContent="Up to date!",e.classList.add("up-to-date"),void document.body.replaceChild(e,l)}let n=document.createElement("table");n.classList.add("styled-table");let r=n.createTHead().insertRow(0),s=r.insertCell(0),c=r.insertCell(1),u=r.insertCell(2),g=r.insertCell(3),p=r.insertCell(4);s.innerHTML="<b>Subject</b>",c.innerHTML="<b>Assignment</b>",u.innerHTML="<b>Due</b>",g.innerHTML="<b>Priority</b>",p.innerHTML="<b>Done</b>";for(let e=1;e<o.length;e++){let t=n.insertRow(e),l=t.insertCell(0),a=t.insertCell(1),r=t.insertCell(2),s=t.insertCell(3),c=t.insertCell(4);switch(l.innerHTML=`<input type="text" value="${o[e][0]}">`,a.innerHTML=`<input type="text" value="${o[e][1]}">`,r.innerHTML=`<input type="date" value="${o[e][2]}">`,o[e][3]){case"3":default:s.innerHTML=`\n                <select name="priority${e}" id="priority${e}">\n                    <option value="3" selected>High</option>\n                    <option value="2">Medium</option>\n                    <option value="1">Low</option>\n                </select>`;break;case"2":s.innerHTML=`\n                <select name="priority${e}" id="priority${e}">\n                    <option value="3">High</option>\n                    <option value="2" selected>Medium</option>\n                    <option value="1">Low</option>\n                </select>`;break;case"1":s.innerHTML=`\n                <select name="priority${e}" id="priority${e}">\n                    <option value="3">High</option>\n                    <option value="2">Medium</option>\n                    <option value="1" selected>Low</option>\n                </select>`}c.innerHTML="<button>Done</button>",l.addEventListener("change",(()=>{d()})),a.addEventListener("change",(()=>{d()})),r.addEventListener("change",(()=>{d()})),s.addEventListener("change",(()=>{d()})),c.addEventListener("click",(()=>{console.log("buton clicked! "+e),i(e),y()}))}if(document.querySelector("#sort").selectedIndex=a.indexOf(o[0][0]),null!=l.parentNode)null===(e=l.parentNode)||void 0===e||e.replaceChild(n,l),console.log("we replaced table");else if(document.querySelector(".up-to-date")){let e=document.querySelector(".up-to-date");null===(t=e.parentNode)||void 0===t||t.replaceChild(n,e),console.log("we replaced header")}l=n}async function g(e){let t=document.querySelector(":root");switch(e){case"chocalate":t.style.setProperty("--big_bg","#0f0e13"),t.style.setProperty("--background","#181922"),t.style.setProperty("--secondary","#46383d"),t.style.setProperty("--fill_color","#2a232e"),t.style.setProperty("--text_color","#f7f1cc");break;case"miner":t.style.setProperty("--big_bg","#282828"),t.style.setProperty("--background","#786f65"),t.style.setProperty("--secondary","#8e8376"),t.style.setProperty("--fill_color","#3b3836"),t.style.setProperty("--text_color","#f7f1cc");break;case"vine":t.style.setProperty("--big_bg","#478e74"),t.style.setProperty("--background","#446b6a"),t.style.setProperty("--secondary","#404c53"),t.style.setProperty("--fill_color","#31343e"),t.style.setProperty("--text_color","#f7f1cc");break;case"autumn":t.style.setProperty("--big_bg","#061e3f"),t.style.setProperty("--background","#261e3e"),t.style.setProperty("--secondary","#451e3e"),t.style.setProperty("--fill_color","#651e3f"),t.style.setProperty("--text_color","#f7f1cc");break;case"lavender":t.style.setProperty("--big_bg","#2c2031"),t.style.setProperty("--background","#31243d"),t.style.setProperty("--secondary","#482261"),t.style.setProperty("--fill_color","#6f5d97"),t.style.setProperty("--text_color","#f7f1cc");break;case"valentine":t.style.setProperty("--big_bg","#c6332c"),t.style.setProperty("--background","#e94682"),t.style.setProperty("--secondary","#eca3ae"),t.style.setProperty("--fill_color","#f0ede2"),t.style.setProperty("--text_color","#954a36")}await chrome.storage.sync.set({theme:e}),n=e;let o=document.querySelector("#color-theme");console.log("theme_select.value is now "+e),o.value=e}async function p(){console.log("we are in the function addListeners"),document.querySelector("#sort").addEventListener("change",(()=>{console.log("changed!! sort!!"),d()}));let e=document.querySelector("#color-theme");e.addEventListener("change",(()=>{console.log("changed!! theme!!"),g(e.options[e.selectedIndex].value)}));let t=document.querySelector("table"),o=t.rows.length;for(let e=0;e<o;e++){let o=t.rows.item(e).cells,n=o.length;for(let e=0;e<n-1;e++){let t=o.item(e).getElementsByTagName("input");null!=t[0]&&t[0].addEventListener("change",(e=>{d()}))}let l=o.item(n-1).getElementsByTagName("button");if(null!=l[0]){const t=l[0];console.log("adding event listener to button"),t.addEventListener("click",(()=>{console.log("buton clicked! "+e),i(e),y()}))}}}async function h(e,t){let n=t.rows.item(0).cells,l=new Array(0);for(let e=0;e<n.length-1;e++){let t=n.item(e).getElementsByTagName("input");if(null!=t[0]){const e=t[0];l.push(e.value),e.value=""}}let a=document.getElementById("addPriority"),r=a.options[a.selectedIndex].value;l.push(r),console.log(`add ${l.toString()}`),o.push(l),await u(),await chrome.storage.sync.set({data:o}),await y()}chrome.runtime.onInstalled.addListener((e=>{console.log("we have just installed this for the first time!!!")})),chrome.runtime.onStartup.addListener((()=>{console.log("we have just started up this")})),await chrome.storage.sync.get("data").then((async e=>{console.log("result[data]: "+e.data),null==e.data&&(console.log("first time creating data!"),await s())})),await c(),await p(),await y();const m=document.querySelector("#addingTable");async function f(e){console.log("data.length: "+e.length);for(let t=0;t<e.length;t++){console.log("data[i].length is "+e[t].length);let o="";for(let n=0;n<e[t].length;n++)console.log(`data[${t}][${n}] is ${e[t][n]}`),o+=e[t][n]+" ";console.log(o)}}document.querySelector("#add").addEventListener("click",(()=>{h(0,m)})),t()}catch(b){t(b)}}),1)}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var o=a[e]={exports:{}};return l[e](o,o.exports,r),o.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},r.a=(l,a,r)=>{var s;r&&((s=[]).d=1);var c,i,d,u=new Set,y=l.exports,g=new Promise(((e,t)=>{d=t,i=e}));g[t]=y,g[e]=e=>(s&&e(s),u.forEach(e),g.catch((e=>{}))),l.exports=g,a((l=>{var a;c=(l=>l.map((l=>{if(null!==l&&"object"==typeof l){if(l[e])return l;if(l.then){var a=[];a.d=0,l.then((e=>{r[t]=e,n(a)}),(e=>{r[o]=e,n(a)}));var r={};return r[e]=e=>e(a),r}}var s={};return s[e]=e=>{},s[t]=l,s})))(l);var r=()=>c.map((e=>{if(e[o])throw e[o];return e[t]})),i=new Promise((t=>{(a=()=>t(r)).r=0;var o=e=>e!==s&&!u.has(e)&&(u.add(e),e&&!e.d&&(a.r++,e.push(a)));c.map((t=>t[e](o)))}));return a.r?i:r()}),(e=>(e?d(g[o]=e):i(y),n(s)))),s&&(s.d=0)},r(975)})();